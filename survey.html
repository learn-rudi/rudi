<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUDI AI Familiarity & Comfort Survey</title>
    <meta name="description" content="Anonymous AI literacy survey by RUDI - Responsible Use of Digital Intelligence. Help your organization understand AI adoption and comfort levels.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --gray-900: #111111;
            --gray-800: #1a1a1a;
            --gray-700: #333333;
            --gray-600: #555555;
            --gray-500: #777777;
            --gray-400: #999999;
            --gray-300: #b3b3b3;
            --gray-200: #cccccc;
            --gray-100: #e5e5e5;
            --gray-50: #f5f5f5;
            --white: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: var(--gray-900);
            background: var(--gray-50);
            -webkit-font-smoothing: antialiased;
        }

        .survey-container {
            min-height: 100vh;
            padding: 2rem;
        }

        .survey-card {
            max-width: 900px;
            margin: 0 auto;
            background: var(--white);
            border: 1px solid var(--gray-200);
            overflow: hidden;
        }

        .survey-header {
            background: var(--gray-900);
            color: var(--white);
            padding: 3rem;
            text-align: center;
        }

        .survey-header h1 {
            font-size: 2rem;
            font-weight: 300;
            margin-bottom: 0.5rem;
            letter-spacing: -0.02em;
        }

        .survey-header .subtitle {
            font-size: 0.875rem;
            color: var(--gray-400);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }

        .survey-header .company-name {
            font-size: 1.125rem;
            font-weight: 500;
            color: var(--white);
            margin-top: 1rem;
        }

        .survey-intro {
            padding: 2rem 3rem;
            background: var(--white);
            border-bottom: 1px solid var(--gray-100);
        }

        .survey-intro p {
            line-height: 1.7;
            color: var(--gray-700);
            margin-bottom: 0.75rem;
            font-size: 0.9375rem;
        }

        .survey-section {
            padding: 2rem 3rem;
            border-bottom: 1px solid var(--gray-100);
        }

        .survey-section:last-of-type {
            border-bottom: none;
        }

        .question {
            margin-bottom: 2.5rem;
        }

        .question:last-child {
            margin-bottom: 0;
        }

        .question-label {
            display: block;
            font-weight: 500;
            color: var(--gray-900);
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .question-label .required {
            color: var(--gray-900);
            margin-left: 0.25rem;
        }

        /* Radio buttons */
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .radio-option {
            display: flex;
            align-items: center;
            padding: 0.875rem 1rem;
            border: 1px solid var(--gray-200);
            cursor: pointer;
            background: var(--white);
        }

        .radio-option:hover {
            border-color: var(--gray-400);
            background: var(--gray-50);
        }

        .radio-option input[type="radio"] {
            width: 18px;
            height: 18px;
            margin-right: 0.875rem;
            cursor: pointer;
            accent-color: var(--gray-900);
        }

        .radio-option.selected {
            border-color: var(--gray-900);
            background: var(--gray-50);
        }

        .radio-option label {
            flex: 1;
            cursor: pointer;
            color: var(--gray-700);
        }

        /* Checkboxes */
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 0.5rem;
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            padding: 0.875rem 1rem;
            border: 1px solid var(--gray-200);
            cursor: pointer;
            background: var(--white);
        }

        .checkbox-option:hover {
            border-color: var(--gray-400);
            background: var(--gray-50);
        }

        .checkbox-option.selected {
            border-color: var(--gray-900);
            background: var(--gray-50);
        }

        .checkbox-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-right: 0.75rem;
            cursor: pointer;
            accent-color: var(--gray-900);
        }

        .checkbox-option label {
            flex: 1;
            cursor: pointer;
            color: var(--gray-700);
            font-size: 0.9375rem;
        }

        .checkbox-note {
            margin-top: 0.75rem;
            font-size: 0.875rem;
            color: var(--gray-500);
            font-style: italic;
        }

        /* Select dropdown */
        .select-input {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 1px solid var(--gray-200);
            font-size: 1rem;
            font-family: inherit;
            background-color: var(--white);
            cursor: pointer;
            color: var(--gray-700);
        }

        .select-input:focus {
            outline: none;
            border-color: var(--gray-900);
        }

        /* Scale */
        .scale-container {
            margin-top: 1rem;
        }

        .scale-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.25rem;
            font-size: 0.875rem;
            color: var(--gray-500);
            font-style: italic;
        }

        .scale-options {
            display: flex;
            justify-content: space-between;
            gap: 0.5rem;
        }

        .scale-option {
            flex: 1;
        }

        .scale-option input[type="radio"] {
            display: none;
        }

        .scale-option label {
            display: block;
            width: 100%;
            padding: 0.875rem 0.5rem;
            text-align: center;
            border: 1px solid var(--gray-200);
            cursor: pointer;
            font-weight: 500;
            background-color: var(--white);
            color: var(--gray-600);
        }

        .scale-option input[type="radio"]:checked + label {
            background-color: var(--gray-900);
            border-color: var(--gray-900);
            color: var(--white);
            font-weight: 600;
        }

        .scale-option label:hover {
            border-color: var(--gray-400);
            background-color: var(--gray-50);
        }

        .scale-option input[type="radio"]:checked + label:hover {
            background-color: var(--gray-900);
        }

        /* Progress indicator */
        .progress-container {
            padding: 1rem 3rem;
            background: var(--white);
            border-bottom: 1px solid var(--gray-100);
        }

        .progress-bar {
            height: 4px;
            background: var(--gray-100);
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gray-900);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Submit section */
        .submit-section {
            padding: 2rem 3rem;
            background: var(--white);
            text-align: center;
        }

        .submit-btn {
            background: var(--gray-900);
            color: var(--white);
            padding: 1rem 2.5rem;
            border: none;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            font-family: inherit;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .submit-btn:hover {
            background: var(--gray-800);
        }

        /* Success message */
        .success-message {
            display: none;
            padding: 4rem 3rem;
            text-align: center;
        }

        .success-message.show {
            display: block;
        }

        .success-icon {
            width: 64px;
            height: 64px;
            border: 2px solid var(--gray-900);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 1.5rem;
        }

        .success-message h2 {
            color: var(--gray-900);
            margin-bottom: 1rem;
            font-size: 1.75rem;
            font-weight: 400;
        }

        .success-message p {
            color: var(--gray-600);
            font-size: 1rem;
            line-height: 1.7;
        }

        .success-note {
            background: var(--gray-50);
            border-left: 3px solid var(--gray-900);
            padding: 1.5rem;
            margin-top: 2rem;
            text-align: left;
        }

        .success-note h3 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .survey-container {
                padding: 1rem;
            }

            .survey-header {
                padding: 2rem 1.5rem;
            }

            .survey-header h1 {
                font-size: 1.5rem;
            }

            .survey-intro,
            .survey-section,
            .submit-section,
            .progress-container {
                padding: 1.5rem;
            }

            .checkbox-grid {
                grid-template-columns: 1fr;
            }

            .scale-options {
                gap: 0.25rem;
            }

            .scale-option label {
                padding: 0.75rem 0.25rem;
                font-size: 0.875rem;
            }
        }
    </style>

    <!-- Survey Configuration -->
    <script src="js/config.js"></script>
</head>
<body>
    <div class="survey-container">
        <div class="survey-card">
            <!-- Header -->
            <div class="survey-header">
                <div class="subtitle">Responsible Use of Digital Intelligence</div>
                <h1>AI Familiarity & Adoption Survey</h1>
                <div class="company-name" id="companyName"></div>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <!-- Survey Form -->
            <form id="surveyForm">
                <!-- Introduction -->
                <div class="survey-intro">
                    <p>This short, anonymous survey will help your organization better understand your comfort and familiarity level with AI. Your responses will not be linked to your name.</p>
                    <p>There are no right or wrong answers. We're simply learning where everyone is starting from.</p>
                    <p>This survey is administered by RUDI (Responsible Use of Digital Intelligence), a public education initiative focused on empowering responsible AI use.</p>
                </div>

                <!-- Questions -->
                <div class="survey-section" id="questionContainer">
                </div>

                <!-- Submit Section -->
                <div class="submit-section">
                    <button type="submit" class="submit-btn" id="submitBtn">Submit Survey</button>
                </div>
            </form>

            <!-- Success Message -->
            <div class="success-message" id="successMessage">
                <div class="success-icon">&#10003;</div>
                <h2>Thank You</h2>
                <p><strong>Your response has been recorded.</strong></p>
                <p>We appreciate your participation in helping us understand AI adoption and comfort levels across your organization.</p>
                <div class="success-note">
                    <h3>Help us get the complete picture</h3>
                    <p>Share this survey link with your team members so we can collect responses from across your organization. The more participants, the better insights we can provide about your team's AI readiness.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Survey questions configuration
        const surveyQuestions = [
            {
                id: "age_range",
                type: "radio",
                question: "Which age group do you belong to?",
                required: true,
                options: [
                    "Under 25",
                    "25-34",
                    "35-44",
                    "45-54",
                    "55-64",
                    "65 or older",
                    "Prefer not to say"
                ]
            },
            {
                id: "industry_sector",
                type: "select",
                question: "Which industry best describes your primary work setting?",
                required: true,
                options: [
                    "Education (PreK-12)",
                    "Education (Higher Ed)",
                    "Workforce Development / Training",
                    "Nonprofit / Community Organization",
                    "Healthcare",
                    "Government / Public Sector",
                    "Business / Corporate (non-tech)",
                    "Technology / Software",
                    "Finance / Legal / Professional Services",
                    "Other"
                ]
            },
            {
                id: "ai_tools_familiar",
                type: "checkbox",
                question: "Which of the following AI tools have you used or are familiar with? (Select all that apply)",
                required: false,
                options: [
                    "ChatGPT",
                    "Claude (Anthropic)",
                    "Copilot",
                    "Perplexity AI",
                    "Google Gemini",
                    "GenSpark / Manus (agents)",
                    "Magic School AI",
                    "Khanmigo (Khan Academy)",
                    "Midjourney / DALL-E / Adobe Firefly (image tools)",
                    "Runway / Pika Labs (video tools)",
                    "ElevenLabs (voice tools)",
                    "None of these"
                ]
            },
            {
                id: "ai_frequency",
                type: "radio",
                question: "How often do you currently use any AI tools in your personal or professional life?",
                required: true,
                options: [
                    "Never",
                    "Rarely (once or twice ever)",
                    "Occasionally (1-2 times per month)",
                    "Weekly",
                    "Daily"
                ]
            },
            {
                id: "organizational_ai_usage",
                type: "radio",
                question: "Which best describes your program's current AI adoption status?",
                required: true,
                options: [
                    "No use yet",
                    "Individual staff experimenting informally",
                    "Small pilot(s) in one area",
                    "Several pilots across units",
                    "Operationalized in standard workflows (with safeguards)"
                ]
            },
            {
                id: "comfort_digital_tools",
                type: "scale",
                question: "How comfortable are you with learning and using new digital tools (including AI) in your role today?",
                required: true,
                scaleMin: 0,
                scaleMax: 10,
                scaleMinLabel: "Very uncomfortable",
                scaleMaxLabel: "Very comfortable"
            },
            {
                id: "ai_concerns",
                type: "checkbox",
                question: "What concerns do you have about using AI in education? (Pick up to 3)",
                required: false,
                maxSelections: 3,
                options: [
                    "I don't know where to start",
                    "Student/client data privacy and security",
                    "It might replace jobs",
                    "People might misuse it (cheating / shortcuts)",
                    "Time required to learn new tools",
                    "Reliability or accuracy of AI responses",
                    "Cost or access to tools",
                    "I'm not concerned"
                ]
            },
            {
                id: "sixty_day_priorities",
                type: "select",
                question: "If you could help your program/department solve one AI-related problem in the next 60 days, what would it be?",
                required: true,
                options: [
                    "Save staff time on admin & compliance (e.g., reports, forms)",
                    "Family / client communications & translation (multilingual support)",
                    "Data dashboards & insights (attendance, outcomes, performance)",
                    "Grant writing & documentation",
                    "Understanding of AI ethics and best practices",
                    "Staff PD/coaching: create training materials & capture best practices",
                    "Other"
                ]
            }
        ];

        // Get company name and creator from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const companyName = urlParams.get('company') || '';
        const creatorEmail = urlParams.get('creator') || '';
        if (companyName) {
            document.getElementById('companyName').textContent = companyName;
        }

        // Render questions
        function renderQuestions() {
            const container = document.getElementById('questionContainer');
            let html = '';

            surveyQuestions.forEach((q, index) => {
                html += `<div class="question">`;
                html += `<label class="question-label">
                    ${index + 1}. ${q.question}
                    ${q.required ? '<span class="required">*</span>' : ''}
                </label>`;

                if (q.type === 'radio') {
                    html += `<div class="radio-group">`;
                    q.options.forEach((option, i) => {
                        html += `
                            <div class="radio-option" data-question="${q.id}">
                                <input type="radio" id="${q.id}_${i}" name="${q.id}" value="${option}" ${q.required ? 'required' : ''}>
                                <label for="${q.id}_${i}">${option}</label>
                            </div>
                        `;
                    });
                    html += `</div>`;
                } else if (q.type === 'checkbox') {
                    html += `<div class="checkbox-grid">`;
                    q.options.forEach((option, i) => {
                        html += `
                            <div class="checkbox-option" data-question="${q.id}">
                                <input type="checkbox" id="${q.id}_${i}" name="${q.id}" value="${option}" ${q.maxSelections ? `data-max="${q.maxSelections}"` : ''}>
                                <label for="${q.id}_${i}">${option}</label>
                            </div>
                        `;
                    });
                    html += `</div>`;
                    if (q.maxSelections) {
                        html += `<p class="checkbox-note">Select up to ${q.maxSelections} options</p>`;
                    }
                } else if (q.type === 'select') {
                    html += `
                        <select class="select-input" name="${q.id}" ${q.required ? 'required' : ''}>
                            <option value="">-- Select one --</option>
                            ${q.options.map(opt => `<option value="${opt}">${opt}</option>`).join('')}
                        </select>
                    `;
                } else if (q.type === 'scale') {
                    html += `
                        <div class="scale-container">
                            <div class="scale-labels">
                                <span>${q.scaleMinLabel}</span>
                                <span>${q.scaleMaxLabel}</span>
                            </div>
                            <div class="scale-options">
                    `;
                    for (let i = q.scaleMin; i <= q.scaleMax; i++) {
                        html += `
                            <div class="scale-option">
                                <input type="radio" id="${q.id}_${i}" name="${q.id}" value="${i}" ${q.required ? 'required' : ''}>
                                <label for="${q.id}_${i}">${i}</label>
                            </div>
                        `;
                    }
                    html += `</div></div>`;
                }

                html += `</div>`;
            });

            container.innerHTML = html;
            addEventListeners();
        }

        // Add event listeners
        function addEventListeners() {
            // Radio button styling
            document.querySelectorAll('.radio-option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionId = this.dataset.question;
                    const input = this.querySelector('input[type="radio"]');

                    document.querySelectorAll(`.radio-option[data-question="${questionId}"]`).forEach(opt => {
                        opt.classList.remove('selected');
                    });

                    this.classList.add('selected');
                    input.checked = true;
                    updateProgress();
                });
            });

            // Checkbox styling and max selection enforcement
            document.querySelectorAll('.checkbox-option').forEach(option => {
                option.addEventListener('click', function(e) {
                    if (e.target.tagName === 'INPUT') return;

                    const input = this.querySelector('input[type="checkbox"]');
                    const questionId = this.dataset.question;
                    const maxSelections = input.dataset.max;

                    if (!input.checked && maxSelections) {
                        const checked = document.querySelectorAll(`input[name="${questionId}"]:checked`).length;
                        if (checked >= parseInt(maxSelections)) {
                            alert(`You can only select up to ${maxSelections} options.`);
                            return;
                        }
                    }

                    input.checked = !input.checked;
                    this.classList.toggle('selected', input.checked);
                    updateProgress();
                });

                const input = option.querySelector('input[type="checkbox"]');
                input.addEventListener('change', function() {
                    const questionId = option.dataset.question;
                    const maxSelections = this.dataset.max;

                    if (this.checked && maxSelections) {
                        const checked = document.querySelectorAll(`input[name="${questionId}"]:checked`).length;
                        if (checked > parseInt(maxSelections)) {
                            this.checked = false;
                            alert(`You can only select up to ${maxSelections} options.`);
                            return;
                        }
                    }

                    option.classList.toggle('selected', this.checked);
                    updateProgress();
                });
            });

            document.querySelectorAll('input, select').forEach(input => {
                input.addEventListener('change', updateProgress);
            });
        }

        // Update progress bar
        function updateProgress() {
            const totalRequired = surveyQuestions.filter(q => q.required).length;
            let completed = 0;

            surveyQuestions.forEach(q => {
                if (!q.required) return;

                const inputs = document.querySelectorAll(`input[name="${q.id}"], select[name="${q.id}"]`);
                const hasValue = Array.from(inputs).some(input => {
                    if (input.type === 'radio' || input.type === 'checkbox') {
                        return input.checked;
                    }
                    return input.value !== '';
                });

                if (hasValue) completed++;
            });

            const progress = (completed / totalRequired) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Google Sheets configuration
        const SHEETS_URL = typeof CONFIG !== 'undefined' ? CONFIG.SHEETS_WEBHOOK_URL : '';

        // Form submission
        document.getElementById('surveyForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = 'Submitting...';

            const formData = {};
            surveyQuestions.forEach(q => {
                if (q.type === 'checkbox') {
                    const checked = Array.from(document.querySelectorAll(`input[name="${q.id}"]:checked`))
                        .map(input => input.value);
                    formData[q.id] = checked;
                } else {
                    const input = document.querySelector(`input[name="${q.id}"]:checked, select[name="${q.id}"]`);
                    formData[q.id] = input ? input.value : '';
                }
            });

            formData.company = companyName;
            formData.created_by = creatorEmail;
            formData.timestamp = new Date().toISOString();

            try {
                if (SHEETS_URL && typeof CONFIG !== 'undefined') {
                    await fetch(SHEETS_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(formData),
                        mode: 'no-cors'
                    });

                    console.log('Survey submitted successfully to Google Sheets');
                } else {
                    console.error('CONFIG not loaded. Please check js/config.js');
                    console.log('Survey Response (not saved):', formData);
                }

                document.getElementById('surveyForm').style.display = 'none';
                document.querySelector('.progress-container').style.display = 'none';
                document.getElementById('successMessage').classList.add('show');

            } catch (error) {
                console.error('Submission error:', error);
                document.getElementById('surveyForm').style.display = 'none';
                document.querySelector('.progress-container').style.display = 'none';
                document.getElementById('successMessage').classList.add('show');
            }
        });

        // Initialize
        renderQuestions();
    </script>
</body>
</html>
